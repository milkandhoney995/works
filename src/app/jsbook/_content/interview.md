## 面接 Q&A（フロントエンド）

以下はフロントエンドの面接でよく問われる質問と簡潔な回答のまとめです。短く端的に答えられるように整理しています。

### Q: JavaScriptのイベントループとは何ですか？
A: JavaScriptは単一スレッドで動作し、イベントループはコールスタックとタスクキュー（マクロタスク／マイクロタスク）を管理して非同期処理を実現します。マイクロタスク（Promiseのコールバックなど）は同じターンのマクロタスクより先に処理されます。

### Q: reflow（レイアウト）と repaint（再描画）の違いは？
A: reflowは要素のレイアウト計算（geometry）を再実行する処理でコストが高い。repaintは見た目（色や可視性）の再描画のみでreflowより安価。DOMやCSSの頻繁な直接操作をまとめて行うことで回避できます。

### Q: `var`, `let`, `const` の違いは？
A: `var`は関数スコープで巻き上げ（hoisting）がある。`let`と`const`はブロックスコープで巻き上げはあるが初期化前参照（TDZ）でエラーになる。`const`は再代入不可（ただしオブジェクトの内部は変更可能）。

### Q: クロージャとは何か？用途は？
A: 関数が定義時のスコープを保持する機能。プライベート変数や状態を関数外から隠すため、ファクトリ関数やモジュールパターンで使われます。

### Q: Promiseとasync/awaitの違いは？
A: `async/await`はPromiseベースの構文糖で、非同期処理を同期的なコードのように書ける。エラーハンドリングは`try/catch`で行える。実行モデルはPromiseそのものです。

### Q: CORSとは？どう対処する？
A: ブラウザが同一生成元ポリシーを補強する仕組み。サーバー側で適切な`Access-Control-Allow-Origin`ヘッダを付与するか、プロキシを使う。認証系ではCookieの送信に`credentials`設定とサーバー側の許可が必要。

### Q: CSSの特異性（specificity）とは？
A: セレクタの優先度を決めるルール（インライン > ID > クラス/属性/疑似クラス > タグ/疑似要素）。競合時はより特異性が高い方が適用される。不要な`!important`の多用は避ける。

### Q: デバウンスとスロットルの違いは？
A: デバウンスは最後の呼び出しのみ実行（入力確定後に1回）、スロットルは一定間隔ごとに最大1回実行（継続的に発火するイベントを制御）。スクロールやリサイズ最適化によく使う。

### Q: メモリリークの原因と対策は？
A: 主な原因は未解除のイベントリスナー、閉包に残る不要な参照、DOMノードの参照保持。対策は不要になったらリスナー解除、タイマーのクリア、参照をnullにする、WeakMap/WeakRefの活用など。

### Q: クリティカルレンダリングパスの最適化とは？
A: CSSを`<head>`で先に読み込み、必要なクリティカルCSSをインライン化、JavaScriptは`defer`/`async`や遅延読み込みでブロッキングを減らす。重要リソースを優先的に配信することで初回描画を高速化します。

### Q: 仮想DOMとは何か？なぜ速いのか？
A: JS上の軽量なDOM表現で、差分（diff）アルゴリズムで最小限の実DOM操作に変換するため、頻繁なDOM更新のコストを下げられます。実際の性能は実装と更新パターン次第です。

### Q: XSS対策の基本は？
A: ユーザー入力を適切にエスケープすること（HTMLエスケープ）、Content Security Policy（CSP）の導入、危険なevalやinnerHTMLの直接使用を避ける。HTTPOnlyなCookieでJSから盗まれないようにする。

### Q: HTTPのキャッシュ制御で重要なヘッダは？
A: `Cache-Control`, `ETag`, `Last-Modified`, `Expires`。静的アセットには長いキャッシュとハッシュによるバージョニングを組み合わせるのが一般的。

### Q: 画像のレスポンシブ対応はどうする？
A: `<img srcset>`/`<picture>`要素で異なる解像度やフォーマット（AVIF/WebP）を提供する。適切なサイズとフォーマットで帯域と描画を最適化する。

### Q: アクセシビリティで最低限意識すべき点は？
A: セマンティックなHTML、適切なaltテキスト、キーボード操作の提供、ARIAは必要な場合に限定して使用、コントラストやフォーカスの可視化など。